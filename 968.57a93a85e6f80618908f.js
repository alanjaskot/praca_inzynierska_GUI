"use strict";(self.webpackChunkpraca_inzynierska_web=self.webpackChunkpraca_inzynierska_web||[]).push([[968],{6968:(Q,I,s)=>{s.r(I),s.d(I,{CategoryModule:()=>X});var f=s(8583),g=s(3423),t=s(7716),U=s(8242),u=s(2290);let w=(()=>{class r{constructor(e,o,a){this.permissionsService=e,this.router=o,this.toastr=a}canActivate(e,o){return!!this.permissionsService.isPermited("Category.SoftDelete")||(this.toastr.error("nie posiadasz uprawnie\u0144"),this.router.navigate(["/main"]),!1)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(U.$),t.LFG(g.F0),t.LFG(u._W))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),b=(()=>{class r{constructor(e,o,a){this.permissionsService=e,this.router=o,this.toastr=a}canActivate(e,o){return!!this.permissionsService.isPermited("Category.Update")||(this.toastr.error("nie posiadasz uprawnie\u0144 do edycji"),this.router.navigate(["/main"]),!1)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(U.$),t.LFG(g.F0),t.LFG(u._W))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),F=(()=>{class r{constructor(e,o,a){this.permissionsService=e,this.router=o,this.toastr=a}canActivate(e,o){return!!this.permissionsService.isPermited("Category.Write")||(this.toastr.error("nie posiadasz uprawnie\u0144"),this.router.navigate(["/main"]),!1)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(U.$),t.LFG(g.F0),t.LFG(u._W))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var C=s(9906),c=s(8049);class v{constructor(){this.id="00000000-0000-0000-0000-000000000000",this.isBuildIn=!1,this.createdAt=new Date,this.category="",this.userId="00000000-0000-0000-0000-000000000000"}}var Z=s(6372),T=s(1145),A=s(1841),J=s(205),d=s(8002),l=s(5304);const q={headers:new A.WM({"Content-Type":"application/json"})};let m=(()=>{class r{constructor(e,o,a){this.httpClient=e,this.settings=o,this.toastr=a,this.params=new A.LE}getAllCategories(){return this.httpClient.get(this.settings.getApiUrl+"/api/Category/GetAllCategories",{withCredentials:!0}).pipe((0,d.U)(o=>o),(0,l.K)(o=>(this.toastr.error(o.error),this.handleError(o))))}getCategoryById(e){return this.httpClient.get(this.settings.getApiUrl+"/api/category/GetCategoryById?id="+e).pipe((0,d.U)(a=>a),(0,l.K)(a=>(this.toastr.error(a.error),this.handleError(a))))}getCategoryByName(e){const o=this.settings.getApiUrl+"/api/category/FindByName";return this.params.delete("").append("name",e),this.httpClient.get(o,{params:this.params}).pipe((0,d.U)(a=>a),(0,l.K)(a=>(this.toastr.error(a.error),this.handleError(a))))}createCategory(e){return this.httpClient.post(this.settings.getApiUrl+"/api/Category/CreateCategory",e).pipe((0,d.U)(a=>a),(0,l.K)(a=>(this.toastr.error(a.error),this.handleError(a))))}updateCategory(e){return this.httpClient.put(this.settings.getApiUrl+"/api/Category/UpdateCategory",e,q).pipe((0,d.U)(a=>a),(0,l.K)(a=>(this.toastr.error(a.error),this.handleError(a))))}softDeleteCategory(e){return this.httpClient.delete(this.settings.getApiUrl+"/api/Category/SoftDeleteCategory?name="+e,q).pipe((0,d.U)(a=>a),(0,l.K)(a=>(this.toastr.error(a.error),this.handleError(a))))}handleError(e){return console.log(`HttpError: ${JSON.stringify(e)}`),(0,J._)(e)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(A.eN),t.LFG(T.g),t.LFG(u._W))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var p=s(3738),x=s(1095),z=s(7746),O=s(1769);const Y=function(r){return["/categories/category",r]},E=function(r){return["/categories/edit-category",r]},M=function(r){return["/categories/delete-category",r]};function L(r,i){if(1&r&&(t.TgZ(0,"mat-list"),t.TgZ(1,"mat-list-item"),t.TgZ(2,"a",2),t._uU(3),t.qZA(),t._uU(4," | "),t.TgZ(5,"a",3),t._uU(6,"Edytuj"),t.qZA(),t._uU(7," | "),t.TgZ(8,"button",4),t._uU(9,"Usu\u0144"),t.qZA(),t.qZA(),t._UZ(10,"mat-divider"),t.qZA()),2&r){const e=i.$implicit;t.xp6(2),t.Q6J("routerLink",t.VKq(4,Y,e.id)),t.xp6(1),t.Oqu(e.category),t.xp6(2),t.Q6J("routerLink",t.VKq(6,E,e.id)),t.xp6(3),t.Q6J("routerLink",t.VKq(8,M,e.id))}}let B=(()=>{class r{constructor(e,o){this.settings=e,this.categoryService=o,this.respond=new Z._,this.categories=[new v]}ngOnInit(){this.getCategories()}getCategories(){return this.categoryService.getAllCategories().pipe((0,c.P)()).subscribe(e=>{this.respond=e,this.categories=this.respond.object},e=>{console.error(`ErrorHttp: ${JSON.stringify(e)}`)})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(T.g),t.Y36(m))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-categories"]],decls:4,vars:1,consts:[[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","routerLink","/categories/new-category",2,"margin-left","30px","margin-top","20px"],["mat-button","",2,"margin-right","40px","font-size","20px",3,"routerLink"],["mat-raised-button","","color","accent",2,"margin-left","30px","margin-right","30px","height","70%","padding","auto",3,"routerLink"],["mat-raised-button","","color","warn",2,"margin-left","30px","margin-right","30px","height","70%","padding","auto",3,"routerLink"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card"),t.YNc(1,L,11,10,"mat-list",0),t.TgZ(2,"a",1),t._uU(3,"Nowa kategoria"),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",o.categories))},directives:[p.a8,f.sg,x.zs,g.yS,z.i$,z.Tg,x.lW,g.rH,O.d],styles:[".mat-card[_ngcontent-%COMP%]{min-width:400px;max-width:700px;margin-top:50px;margin-left:auto;margin-right:auto}"]}),r})();var S=s(9709),y=s(8295);function D(r,i){if(1&r&&(t.TgZ(0,"p"),t.TgZ(1,"mat-label",2),t._uU(2,"data edycji:"),t.qZA(),t.TgZ(3,"mat-label",3),t._uU(4),t.ALo(5,"date"),t.qZA(),t.qZA()),2&r){const e=t.oxw();t.xp6(4),t.Oqu(t.xi3(5,1,e.category.isModified,"dd.MM.yyyy"))}}let K=(()=>{class r{constructor(e,o,a){this.categoryService=e,this.activetedRoute=o,this.userService=a,this.categoryId="",this.userId="",this.userName="",this.respond=new Z._,this.category=new v}ngOnInit(){this.activetedRoute.params.subscribe(e=>{this.categoryId=e.id}),this.getCategory(this.categoryId)}getCategory(e){return this.categoryService.getCategoryById(e).pipe((0,c.P)()).subscribe(o=>{this.respond=o,this.category=this.respond.object,this.getUserNameById(this.category.userId)},o=>{console.error(`ErrorHttp: ${JSON.stringify(o)}`)})}getUserNameById(e){return this.userService.getUserNameById(e).pipe((0,c.P)()).subscribe(o=>{this.respond=o,this.userName=o.object},o=>{console.error(`ErrorHttp: ${JSON.stringify(o)}`)})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(m),t.Y36(g.gz),t.Y36(S.K))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-category"]],decls:20,vars:7,consts:[[1,"centerMe"],[2,"text-align","left"],[2,"font-size","18px","padding-left","20px"],[2,"font-size","14px","padding-left","20px"],[4,"ngIf"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-card"),t.TgZ(2,"mat-card-content",1),t.TgZ(3,"p"),t.TgZ(4,"mat-label",2),t._uU(5,"kategoria:"),t.qZA(),t.TgZ(6,"mat-label",3),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"p"),t.TgZ(9,"mat-label",2),t._uU(10,"data utworzenia:"),t.qZA(),t.TgZ(11,"mat-label",3),t._uU(12),t.ALo(13,"date"),t.qZA(),t.qZA(),t.YNc(14,D,6,4,"p",4),t.TgZ(15,"p"),t.TgZ(16,"mat-label",2),t._uU(17,"stworzona przez:"),t.qZA(),t.TgZ(18,"mat-label",3),t._uU(19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(7),t.Oqu(o.category.category),t.xp6(5),t.Oqu(t.xi3(13,4,o.category.createdAt,"dd.MM.yyyy")),t.xp6(2),t.Q6J("ngIf",!0===o.category.isModified),t.xp6(5),t.Oqu(o.userName))},directives:[p.a8,p.dn,y.hX,f.O5],pipes:[f.uU],styles:[".centerMe[_ngcontent-%COMP%]{min-width:300px;max-width:500px;margin:auto;text-align:center}"]}),r})(),j=(()=>{class r{constructor(e,o,a,h){this.categoryService=e,this.activatedRoute=o,this.toastr=a,this.router=h,this.categoryId="",this.respond=new Z._}ngOnInit(){this.activatedRoute.params.subscribe(e=>{this.categoryId=e.id}),this.deleteCategory(this.categoryId)}deleteCategory(e){return this.categoryService.softDeleteCategory(e).pipe((0,c.P)()).subscribe(o=>{this.toastr.show("Kategoria zosta\u0142a usuni\u0119ta"),this.router.navigate(["/categories"])},o=>{console.log(JSON.stringify(o))})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(m),t.Y36(g.gz),t.Y36(u._W),t.Y36(g.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-delete-category"]],decls:2,vars:1,consts:[[2,"margin","auto"]],template:function(e,o){1&e&&(t.TgZ(0,"p",0),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.hij("Proces usuwania kategorii ",o.categoryId,""))},styles:[""]}),r})();var n=s(3679),G=s(9983);let P=(()=>{class r{constructor(e,o,a,h,N){this.categoryService=e,this.activatedRoute=o,this.router=a,this.userService=h,this.formBuilder=N,this.categoryId="",this.userId="",this.userName="",this.respond=new Z._,this.category=new v,this.categoryName=new n.NI(this.category.category),this.form=this.formBuilder.group({categoryName:this.categoryName})}isFormDirty(){return!this.form.dirty}ngOnInit(){this.activatedRoute.params.subscribe(e=>{this.categoryId=e.id}),this.getCategory(this.categoryId)}onSubmit(){this.category.category=this.categoryName,this.updateCategory(this.category)}getCategory(e){return this.categoryService.getCategoryById(e).pipe((0,c.P)()).subscribe(o=>{this.respond=o,this.category=this.respond.object,this.getUserNameById(this.category.userId)},o=>{console.error(`ErrorHttp: ${JSON.stringify(o)}`)})}getUserNameById(e){return this.userService.getUserNameById(e).pipe((0,c.P)()).subscribe(o=>{this.respond=o,this.userName=o.object},o=>{console.error(`ErrorHttp: ${JSON.stringify(o)}`)})}updateCategory(e){return this.categoryService.updateCategory(e).pipe((0,c.P)()).subscribe(o=>{this.router.navigate(["/categories"])},o=>{console.error(`ErrorHttp: ${JSON.stringify(o)}`)})}get formControls(){return this.form.controls}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(m),t.Y36(g.gz),t.Y36(g.F0),t.Y36(S.K),t.Y36(n.qu))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-edit-category"]],decls:19,vars:6,consts:[[1,"centerMe"],[2,"margin-top","40px","padding-top","40px"],[2,"font-size","24px"],[3,"formGroup","ngSubmit"],[2,"margin","auto","margin-top","40px"],["type","text","matInput","","formControlName","categoryName",3,"placeholder"],[2,"margin-left","60px","text-align","left"],[2,"padding-left","0px","text-align","left"],[2,"padding-left","20px"],["type","submit","mat-raised-button","","color","accent",2,"margin-top","30px"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-card",1),t.TgZ(2,"mat-label",2),t._uU(3,"Zmiana nazwy kategorii"),t.qZA(),t.TgZ(4,"mat-card-content"),t.TgZ(5,"form",3),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(6,"p"),t.TgZ(7,"mat-form-field",4),t.TgZ(8,"mat-label"),t._uU(9),t.qZA(),t._UZ(10,"input",5),t.qZA(),t.qZA(),t.TgZ(11,"p",6),t.TgZ(12,"mat-label",7),t._uU(13,"Dodano przez:"),t.qZA(),t.TgZ(14,"mat-label",8),t._uU(15),t.qZA(),t.qZA(),t.TgZ(16,"p"),t.TgZ(17,"button",9),t._uU(18,"Zmie\u0144"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.Q6J("formGroup",o.form),t.xp6(2),t.Udp("width",350,"px"),t.xp6(2),t.hij("Kategoria: ",o.category.category,""),t.xp6(1),t.s9C("placeholder",o.category.category),t.xp6(5),t.Oqu(o.userName))},directives:[p.a8,y.hX,p.dn,n._Y,n.JL,n.sg,y.KE,G.Nt,n.Fj,n.JJ,n.u,x.lW],styles:[".centerMe[_ngcontent-%COMP%]{min-width:300px;max-width:500px;margin:auto;text-align:center}"]}),r})();const W=[{path:"",children:[{path:"",component:B},{path:"category/:id",component:K},{path:"new-category",component:(()=>{class r{constructor(e,o,a,h,N){this.categoryService=e,this.userService=o,this.toastr=a,this.formBuilder=h,this.router=N,this.newCategory=new v,this.userId="",this.categoryName=new n.NI(""),this.form=this.formBuilder.group({categoryName:this.categoryName})}isFormDirty(){return!this.form.dirty}onSubmit(){this.userId=this.userService.getUserId(),this.newCategory={id:"00000000-0000-0000-0000-000000000000",category:this.categoryName.value,isBuildIn:!0,createdAt:new Date,userId:this.userId},this.categoryService.createCategory(this.newCategory).pipe((0,c.P)()).subscribe(e=>{console.log(e),this.toastr.success("Dodano kategori\u0119"),this.router.navigate(["/categories"])},e=>{console.error(`ErrorHttp: ${JSON.stringify(e)}`)})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(m),t.Y36(S.K),t.Y36(u._W),t.Y36(n.qu),t.Y36(g.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-new-category"]],decls:14,vars:3,consts:[[1,"centerMe"],[2,"margin-top","40px","padding-top","40px"],[2,"font-size","24px"],[3,"formGroup","ngSubmit"],[2,"margin","auto","margin-top","40px"],["type","text","matInput","","placeholder","nowa kategoria...","formControlName","categoryName"],["type","submit","mat-raised-button","","color","accent",2,"margin-top","30px"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-card",1),t.TgZ(2,"mat-label",2),t._uU(3,"Nowa Kategoria"),t.qZA(),t.TgZ(4,"mat-card-content"),t.TgZ(5,"form",3),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(6,"p"),t.TgZ(7,"mat-form-field",4),t.TgZ(8,"mat-label"),t._uU(9,"Kategoria"),t.qZA(),t._UZ(10,"input",5),t.qZA(),t.qZA(),t.TgZ(11,"p"),t.TgZ(12,"button",6),t._uU(13,"Dodaj"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.Q6J("formGroup",o.form),t.xp6(2),t.Udp("width",350,"px"))},directives:[p.a8,y.hX,p.dn,n._Y,n.JL,n.sg,y.KE,G.Nt,n.Fj,n.JJ,n.u,x.lW],styles:[".centerMe[_ngcontent-%COMP%]{min-width:300px;max-width:500px;margin:auto;text-align:center}"]}),r})(),canActivate:[C.i,F]},{path:"edit-category/:id",component:P,canActivate:[C.i,b]},{path:"delete-category/:id",component:j,canActivate:[C.i,w]}]}];let $=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[g.Bz.forChild(W)],g.Bz]}),r})();var H=s(8491),R=s(5818);let X=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[R.r,T.g,m,C.i,F,b,w],imports:[[f.ez,$,H.q,g.Bz,n.u5,n.UX,A.JF]]}),r})()}}]);